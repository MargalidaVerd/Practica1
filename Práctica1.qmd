---
title: "Práctica 1"
author: "Carla Martínez, Patricia Mateu, Margalida Verd"
format: html
editor: visual
---
CADA VARIABLE
- cualitativa - describir como se llaman y cuantas hay de cada tipo
- cuantos pingus hay en cada isla
- summary de los pingus + desviación típica sd()

EN GENERAL
- Todas la especies viven en todas las islas?
- De que especie es el pinguino que tiene el pico más largo/ancho....??

Primero instalamos el paquete "palmerpenguins" y mostramos por pantalla las primeras filas para asegurarnos que se ha cargado correctamente.

```{r, warning=FALSE}
#install.packages("palmerpenguins")
library("palmerpenguins")
head(penguins,10)
```

Veamos su estructura:

```{r}
str(penguins)
```

Como podemos observar, el tamaño de la muestra realizada es de 344 pingüinos, de los que se han tomado datos de 8 variables diferentes. Entre estas encontramos tres variables de tipo *factor*: `Species`, que puede tomar tres valores ("Adelie", "Chinstrap", "Gentoo"); la variable `Island` asigna la isla de procedencia de cada individuo y toma tres valores también, que son "Biscoe", "Dream" y "Torgersen"; finalmente los niveles de la variable `sex` son "female" y "male".

También encontramos dos variables del tipo *numérico*, que son `bill_length_mm`, que corresponde a la longitud del pico de cada pingüino, en milímetros , y `bill_depth_mm`, que corresponde al grosor del pico, también en milímetros.

Finalmente, tenemos tres últimas variables de tipo *integer*: `flipper_length_mm`, que corresponde a la longitud de las aletas de cada pingüino, en milímetros; `body_mass_g`, que recoge la masa corporal en gramos de cada individuo; `year`, que se atubuye al año de estudio de cada pingüino (2007, 2008 o 2009).

Observamos también que hay valores NA y, por lo tanto vamos a eliminar los sujetos que presenten estos valores. Guardamos el nuevo dataframe porque trabajaremos con él a partir de ahora.

```{r}
pinguinos = na.omit(penguins)
```

Una vez hemos limpiado los datos, empezamos con el análisis descriptivo.

## Datos demográficos

Empecemos por las frecuencias relativas de cada especie de pingüino:

```{r}
table(pinguinos$species)
```

Con cierta diferencia, la especie más poblada es la *Adelie*, seguida de *Gentoo* y, finalmente, *Chinstrap*, que es la menos poblada. Veámoslo gráficamente:

```{r, warning=FALSE}

library(ggplot2)

data = data.frame(group = c("Adelie", "Gentoo", "Chinstrap"), value = c(146, 119, 68))

ggplot(data, aes(x = "", y = value, fill = group)) + geom_col() +
  coord_polar(theta = "y") +
  theme_void() +
  guides(fill= guide_legend(title = ""))

```

También es interesante estudiar la población por islas. A continuación lo vemos:

```{r}
table(pinguinos$island)
```

Como podemos ver, la isla más poblada es la Biscoe, seguida de Dream y, por último, ya más alejada en cuanto a valores, la isla Torgersen. Analicemos ahora la población de cada isla por especies; es decir, nos interesa saber la cantidad de pingüinos de cada especie en cada isla. Para ello utilizamos:

```{r}
adelie = pinguinos[which(pinguinos$species == "Adelie"),]
table(adelie$island)
```

```{r}
gentoo = pinguinos[which(pinguinos$species == "Gentoo"),]
table(gentoo$island)
```

```{r}
chinstrap = pinguinos[which(pinguinos$species == "Chinstrap"),]
table(chinstrap$island)
```

## Estudio por especie

Vamos a analizar las diferentes característcas de cada especie. En primer lugar, estudiaremos la media de las caracerísticas de los pingüinos. Lo haremos con la función `aggregate()` donde definiremos las características como vector y lo relacionaremos con las diferentes especies de nuestro dataframe.

```{r}
aggregate(cbind(bill_length_mm, bill_depth_mm, flipper_length_mm, body_mass_g )~species, 
          data=pinguinos, FUN=mean)
```

Como podemos observar, la especie *Chinstrap* es la que tiene el pico más largo y ancho en comparación a las medias de las otras dos especies. En cambio, la especie *Gentoo* tiene las aletas más largas que las otras dos especies que están bastante cerca en realción a la media. Y, por último, la especie *Gentoo* tiene el peso medio considerablemente más alto que las demás que són bastante próximas numéricamente.

Ahora bien, vamos a estudiar cada especie por separado. Empezaremos estudiando la especie *Adelie* que es la más abundante. Vamos a estudiar la media de sus características en relación a la isla que habitan para ver si hay diferencias significativas entre habitar una isla u otra.

```{r}
aggregate(cbind(bill_length_mm, bill_depth_mm, flipper_length_mm, body_mass_g )~island,
          data=adelie, FUN=mean)
```

Podemos observar que las medias de la largaria y anchura del pico son próximas numericamente. En cambio, las aletas de los pingüinos *Adelie* de la isla *Torgersen* són un poco más largas que las de las otras islas. Sobre el peso podemos decir que las medias son bastante cercanas, así que no podemos observar diferencias significativas entre el peso de los pingüinos *Adelie* en referencia a habitar una isla u otra.

Notemos que con las especies *Chinstrap* y *Gentoo* no podemos hacer el estudio de las diferentes islas ya que sólo habitan una: la especie *Chinstrap* habita en *Dream* y la *Gentoo* en *Biscoe*.

## Resumen especies

Vamos a ver de manera resumida los daros recogidos anteriormente:

```{r}
summary(pinguinos)
```

RESUMIR ESTO UN POCO MONO


```{r}
boxplot(pinguinos$body_mass_g, 
        main = "Peso Pingüinos",
        boxwex = 0.45,col="blue")
```
```{r, warning=FALSE}
mod = lm(body_mass_g ~ bill_length_mm + bill_depth_mm + flipper_length_mm, data=pinguinos)
library(car)
outlierTest(mod, cutoff=Inf)
influenceIndexPlot(mod, vars="Bonf", las=1)
```



> > > > > > > fafaaced80dd78c770246be002389718e3bf0bc4
